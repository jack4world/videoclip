# 自定义提示词指南

学习如何编写自定义分析提示词，让 AI 按照您的需求找出精彩片段。

## 基本用法

### 命令行参数

```bash
python main.py --video "video.mp4" --prompt "你的提示词"
```

### 从文件读取

```bash
python main.py --video "video.mp4" --prompt-file prompt.txt
```

## 提示词结构

### 基本格式

```
请分析以下视频字幕，找出[你的需求]。

要求：
1. [要求1]
2. [要求2]
3. [要求3]

字幕内容：
{subtitle_text}

请返回 JSON 格式，包含 highlights 数组。
```

### 占位符

- `{subtitle_text}` - 字幕内容（会自动替换）

如果不使用占位符，字幕内容会自动追加到提示词末尾。

## 示例

### 示例1：找出技术创新相关片段

```text
请分析以下视频字幕，找出所有关于技术创新的内容片段。

要求：
1. 识别出所有涉及技术创新的片段
2. 每个片段需要包含开始时间、结束时间和内容描述
3. 说明为什么这段内容与技术创新相关

字幕内容：
{subtitle_text}

请返回 JSON 格式，包含 highlights 数组。
```

### 示例2：找出关键观点

```text
请分析以下视频字幕，找出演讲者的3-5个核心观点。

要求：
1. 每个观点应该是独立的、完整的论述
2. 包含观点的时间戳
3. 简要说明观点的核心内容

字幕内容：
{subtitle_text}

请返回 JSON 格式，包含 highlights 数组。
```

### 示例3：找出问答环节

```text
请分析以下视频字幕，找出所有问答环节。

要求：
1. 识别出问题和对应的回答
2. 每个问答对作为一个片段
3. 包含完整的问题和回答内容

字幕内容：
{subtitle_text}

请返回 JSON 格式，包含 highlights 数组。
```

## 提示词编写技巧

### 1. 明确目标

清楚地说明您想要什么：

❌ 不好的示例：
```
找出有趣的内容
```

✅ 好的示例：
```
找出所有关于人工智能未来发展的观点，特别是涉及技术突破和行业影响的内容
```

### 2. 指定数量

明确需要多少个片段：

```
找出3-5个最精彩的观点片段
```

### 3. 说明标准

解释什么是"精彩"或"重要"：

```
找出最重要的观点，标准是：
1. 对行业有重大影响
2. 包含具体的数据或案例
3. 观点新颖或有争议性
```

### 4. 指定格式

确保返回格式符合要求：

```
请返回 JSON 格式，格式如下：
{
  "highlights": [
    {
      "start_time": 10.5,
      "end_time": 25.3,
      "text": "片段内容",
      "reason": "为什么精彩"
    }
  ]
}
```

## 高级技巧

### 结合上下文

```text
这是一个关于人工智能的演讲。请找出所有涉及以下主题的片段：
1. 大语言模型的发展
2. AI 对就业的影响
3. AI 安全和伦理问题

字幕内容：
{subtitle_text}
```

### 指定时间范围

```text
请分析视频的前30分钟内容，找出关键观点。

字幕内容：
{subtitle_text}
```

### 多语言支持

```text
请分析以下中英文字幕，找出所有关于技术创新的片段。
字幕可能包含中英文混合内容，请确保理解完整含义。

字幕内容：
{subtitle_text}
```

## 常见问题

### Q: 提示词太长怎么办？

A: 可以保存到文件，使用 `--prompt-file` 参数：

```bash
python main.py --video "video.mp4" --prompt-file long_prompt.txt
```

### Q: 如何确保返回正确的格式？

A: 在提示词中明确指定 JSON 格式，并给出示例。

### Q: 提示词不生效怎么办？

A: 
1. 检查提示词是否清晰明确
2. 确保使用了正确的占位符
3. 查看日志了解 API 返回的内容
4. 尝试简化提示词

## 提示词模板库

### 模板1：通用精彩片段

```text
请分析以下视频字幕，找出3-5个最精彩的观点或内容片段。

要求：
1. 每个片段应该包含完整的观点或论述
2. 片段应该有趣、有价值或引人思考
3. 包含开始时间、结束时间和内容描述

字幕内容：
{subtitle_text}

请返回 JSON 格式，包含 highlights 数组。
```

### 模板2：技术讨论

```text
请分析以下技术类视频字幕，找出所有涉及技术细节和实现的片段。

要求：
1. 识别出包含具体技术方案的片段
2. 说明技术方案的创新点或优势
3. 包含时间戳和完整内容

字幕内容：
{subtitle_text}

请返回 JSON 格式，包含 highlights 数组。
```

### 模板3：观点总结

```text
请分析以下视频字幕，总结出演讲者的5个核心观点。

要求：
1. 每个观点应该是独立的、完整的论述
2. 观点应该具有代表性或重要性
3. 包含观点的时间戳和详细内容

字幕内容：
{subtitle_text}

请返回 JSON 格式，包含 highlights 数组。
```

## 相关文档

- [快速入门](quickstart.md)
- [命令行参考](cli-reference.md)
- [完整教程](tutorial.md)

